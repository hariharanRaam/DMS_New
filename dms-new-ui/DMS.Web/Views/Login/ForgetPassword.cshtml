@model DMS.Model.Forgot_Password
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DMS</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <!-- Font Awesome -->
    <link href="~/Content/css/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/css/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <!-- Ionicons -->
    <link href="~/Content/css/bower_components/Ionicons/css/ionicons.min.css" rel="stylesheet" />
    <!-- Theme style -->
    <link href="~/Content/css/dist/css/AdminLTE.min.css" rel="stylesheet" />
    <!-- AdminLTE Skins. Choose a skin from the css/skins
           folder instead of downloading all of them to reduce the load. -->
    <link href="~/Content/css/dist/css/skins/_all-skins.min.css" rel="stylesheet" />
    @*<link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">*@
    <!-- Morris chart -->
    <link href="~/Content/css/bower_components/morris.js/morris.css" rel="stylesheet" />
    <!-- jvectormap -->
    <link href="~/Content/css/bower_components/jvectormap/jquery-jvectormap.css" rel="stylesheet" />
    <!-- Date Picker -->
    <link href="~/Content/css/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet" />
    <!-- Daterange picker -->
    <link href="~/Content/css/bower_components/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" />
    <!-- bootstrap wysihtml5 - text editor -->
    <link href="~/Content/css/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" />
    @*<link href="~/Content/css/dist/css/dms.css" rel="stylesheet" />*@
    <link href="~/Content/css/dist/css/dms.css" rel="stylesheet" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <!--css for showing alert message popup box-->
   <link href="~/Content/css/jquery-confirm.min.css" rel="stylesheet" />

    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">*@
    <style>
        .modal {
            padding-right: 650px !important;
        }
    </style>
</head>
<body class="logingbg">
    <div class="login-box">
        <div class="">
            <div class="login-box-body">
                <p class="login-box-msg">
                    <img src="~/Content/css/dist/images/Flexidocs.jpg" class="img-responsive center-block">
                    <h3>Forgot Password</h3>
                </p>
                <form action="" class="form-horizontal" method="post" style="height:100%">
                    <div class="form-group has-feedback">
                        @*<label class="col-md-5 control-label"> User Id</label>*@
                        @Html.TextBoxFor(m => m.Emp_Code, null, new { @class = "form-control", @placeholder="Employee Code" })
                        <span class="fa fa-user form-control-feedback"></span>
                        @Html.ValidationMessageFor(m => m.Emp_Code)
                    </div>
                    <div class="form-group has-feedback">
                        @*<label class="col-md-5 control-label"> EMail</label>*@
                        @Html.TextBoxFor(m => m.Emp_EmailId, null, new { @class = "form-control", @placeholder = "Email ID"})
                        <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
                        @Html.ValidationMessageFor(m => m.Emp_EmailId)
                    </div>
                    <div class="row">
                        <!-- /.col -->
                        <table>
                            <tr>
                                <td style="width:40%"></td>
                                <td>
                                    <button type="button" class="btn btn-primary btn-block btn-flat" onclick="return Cancel()" id=" btncancel">Cancel</button>
                                </td>
                                <td style="width:2%"></td>
                                <td>
                                    <button type="button" class="btn btn-primary btn-block btn-flat" onclick="Forgotpwd()" id="btnsubmit">Submit</button>
                                </td>
                            </tr>
                        </table>
                        @*<div style="width:100px">
                        </div>
                        <div style="width:100px" class="col-lg-10">
                            <button type="button" class="btn btn-primary btn-block btn-flat" onclick="return Cancel()" id=" btncancel">Cancel</button>
                        </div>
                        <div style="width:100px" >
                            <button type="button" class="btn btn-primary btn-block btn-flat" onclick="Forgotpwd()" id="btnsubmit">Submit</button>
                        </div>*@
                    </div>
                </form>
                <div class="col-xs-12 text-center">
                    <span class="errormessage" id="erridmsg" style="color:red"></span>
                </div>
            </div>
        </div>
    </div>
    <footer class="container" style="text-align:center; width:100%">
        <strong style="text-align:center">Copyright &copy; 2019 Flexicode Technologies Pvt Ltd.</strong>
    </footer>
</body>
</html>
<script src="~/Content/css/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="~/Content/css/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!--js for showing alert message popup box-->
<script src="~/Scripts/jquery-confirm.min.js"></script>
@*<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>*@

<script>
    function Cancel() {
        debugger;
        window.location.href = '../Login/Login';
        return;
    }
    function Forgotpwd() {
        debugger;
        var Userid = $("#Emp_Code").val();
        var Useremailid = $("#Emp_EmailId").val();
        if (Userid == "" || Userid == null || Userid == '0')
        {
            $.alert({
                title: 'DMS',
                content: 'User ID should not be blank.!',
                type: 'blue',
            });
            return false;
        }
        if (Useremailid == "" || Useremailid == null || Useremailid == '0') {
            $.alert({
                title: 'DMS',
                content: 'Email ID should not be blank.!',
                type: 'blue',
            });
            return false;
        }

        $.ajax({
            url: '@Url.Action("ForgetPassword", "Login")',
            type: "POST",
            datatype: "json",
            async: false,
            data: { 'Emp_Code': Userid, 'Useremailid': Useremailid },
            success: function (data) {
                debugger;
                var msg = data;
                if (msg == 'Success') {
                    $.dialog({
                        title: 'DMS',
                        content: 'OTP has sent through your registered Email Id.!',
                        type: 'blue',
                    });
                    setTimeout(function () {
                        //window.location.reload(1);
                        window.location.href = '../Login/Login';
                    }, 1500);
                }
                if (msg == 'Invalid') {
                    $.alert({
                        title: 'DMS',
                        content: 'Invalid User/Email.!',
                        type: 'blue',
                    });
                }
            },
            error: function (data) {
                $.alert({
                    title: 'DMS',
                    content: 'Failed to create.!',
                    type: 'blue',
                });
            }
        });

    }
</script>
